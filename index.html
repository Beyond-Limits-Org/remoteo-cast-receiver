<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Remoteo Receiver</title>
  <script src="https://www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
  <script>
    const context = cast.framework.CastReceiverContext.getInstance();
    const playerManager = context.getPlayerManager();

    const options = new cast.framework.CastReceiverOptions();
    options.disableRemoteControl = true;
    options.disableIdleTimeout = false;
    options.customNamespaces = {
      "urn:x-cast:com.remoteo.control": {}
    };
    // enforce only these commands
    options.supportedCommands = 0;  // no default media commands

    // block any PLAY / PAUSE / SEEK
    const block = (msg) => {
      console.warn("Blocked command:", msg);
      const err = new cast.framework.messages.ErrorData();
      err.type = cast.framework.messages.ErrorType.INVALID_REQUEST;
      err.reason = cast.framework.messages.ErrorReason.NOT_SUPPORTED;
      return err;
    };
    playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PLAY, block);
    playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PAUSE, block);
    playerManager.setMessageInterceptor(cast.framework.messages.MessageType.SEEK, block);

    context.addEventListener(
      cast.framework.system.EventType.SENDER_CONNECTED,
      (ev) => {
        // optionally check senderId or namespace
        console.log("Sender connected:", ev.senderId);
      }
    );

    context.start(options);
  </script>
</head>
<body>
  <h3>Remoteo Receiver</h3>
</body>
</html>
